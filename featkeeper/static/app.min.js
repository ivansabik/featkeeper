/*! featkeeper-grunt-deploy 2016-03-08 */
function FeatureRequestViewModel(){var a=this;a.featureRequestUrl="/api/v1/feature-request",a.featureRequests=ko.observableArray(),a.ajax=function(a,b,c){var d={url:a,type:b,contentType:"application/json",accepts:"application/json",cache:!1,dataType:"json",data:JSON.stringify(c),error:function(a){console.log("ajax error "+a.status)}};return $.ajax(d)},a.ajax(a.featureRequestUrl,"GET").done(function(b){for(var c=0;c<b.feature_requests.length;c++)a.featureRequests.push({_id:ko.observable(b.feature_requests[c]._id),title:ko.observable(b.feature_requests[c].title),description:ko.observable(b.feature_requests[c].description),clientName:ko.observable(b.feature_requests[c].client_name),clientPriority:ko.observable(b.feature_requests[c].client_priority),targetDate:ko.observable(b.feature_requests[c].target_date),ticketUrl:ko.observable(b.feature_requests[c].ticket_url),productArea:ko.observable(b.feature_requests[c].product_area),agentName:ko.observable(b.feature_requests[c].agent_name),done:ko.observable(b.feature_requests[c].done)})}),a.beginNew=function(){$("#new").modal("show")},a.saveNewFeatureRequest=function(b){a.ajax(a.featureRequestUrl,"POST",b).done(function(b){a.featureRequests.unshift({title:ko.observable(b.feature_request.title),description:ko.observable(b.feature_request.description),clientName:ko.observable(b.feature_request.client_name),clientPriority:ko.observable(b.feature_request.client_priority),targetDate:ko.observable(b.feature_request.target_date),ticketUrl:ko.observable(b.feature_request.ticket_url),productArea:ko.observable(b.feature_request.product_area),agentName:ko.observable(b.feature_request.agent_name),createdAt:ko.observable(b.feature_request.created_at),done:ko.observable(b.feature_request.done)})})},a.beginEdit=function(a){editFeatureRequestViewModel.setFeatureRequest(a),$("#edit").modal("show")},a.editFeatureRequest=function(b,c){var d=a.featureRequestUrl+"/"+b._id();a.ajax(d,"PUT",c).done(function(c){a.updateFeatureRequest(b,c.feature_request)})},a.updateFeatureRequest=function(b,c){var d=a.featureRequests.indexOf(b);a.featureRequests()[d].title(c.title),a.featureRequests()[d].description(c.description),a.featureRequests()[d].clientPriority(c.client_priority),a.featureRequests()[d].targetDate(c.target_date),a.featureRequests()[d].productArea(c.product_area),a.featureRequests()[d].done(c.done)},a.markDone=function(a){a.done(!0)}}function NewFeatureRequestViewModel(){var a=this;a.title=ko.observable(),a.description=ko.observable(),a.clientName=ko.observable(),a.clientPriority=ko.observable(),a.ticketUrl=ko.observable(),a.targetDate=ko.observable(),a.productArea=ko.observable(),a.agentName=ko.observable(),a.done=ko.observable(),a.newFeatureRequest=function(){$("#new").modal("hide"),featureRequestViewModel.saveNewFeatureRequest({title:a.title(),description:a.description(),client_name:a.clientName(),client_priority:parseInt(a.clientPriority()),target_date:a.targetDate(),product_area:a.productArea(),agent_name:a.agentName()}),a.title(""),a.description(""),a.clientName(""),a.clientPriority(""),a.targetDate(""),a.productArea(""),a.agentName("")}}function EditFeatureRequestViewModel(){var a=this;a.title=ko.observable(),a.description=ko.observable(),a.clientPriority=ko.observable(),a.targetDate=ko.observable(),a.productArea=ko.observable(),a.done=ko.observable(),a.setFeatureRequest=function(b){a.featureRequest=b,a.title(b.title()),a.description(b.description()),a.clientPriority(b.clientPriority()),a.targetDate(b.targetDate()),a.productArea(b.productArea()),a.done(b.done()),$("edit").modal("show")},a.editFeatureRequest=function(){$("#edit").modal("hide"),featureRequestViewModel.editFeatureRequest(a.featureRequest,{title:a.title(),description:a.description(),client_priority:parseInt(a.clientPriority()),target_date:a.targetDate(),product_area:a.productArea(),done:a.done()})}}$(function(){$("#new-target-date, #edit-target-date").datepicker({format:"yyyy-mm-dd",startDate:moment().format("YYYY-MM-DD")})});var featureRequestViewModel=new FeatureRequestViewModel,newFeatureRequestViewModel=new NewFeatureRequestViewModel,editFeatureRequestViewModel=new EditFeatureRequestViewModel;ko.applyBindings(featureRequestViewModel,$("#main")[0]),ko.applyBindings(newFeatureRequestViewModel,$("#new")[0]),ko.applyBindings(editFeatureRequestViewModel,$("#edit")[0]);